var b=(z,U,p)=>new Promise((a,y)=>{var w=m=>{try{f(p.next(m))}catch(S){y(S)}},x=m=>{try{f(p.throw(m))}catch(S){y(S)}},f=m=>m.done?a(m.value):Promise.resolve(m.value).then(w,x);f((p=p.apply(z,U)).next())});import{g as Ve,a as ye,R as h,u as Se}from"./index-Ds5FLBrp.js";import{g as ke,a as ge}from"./task-8oYUsId3.js";import{L as Pe}from"./index-Qc7cWITm.js";import{d as we,n as d,I as V,x as xe,aC as L,c as T,w as Ce,g as I,h as u,b as o,r as i,j as he,o as c,e as P,f as F,T as Ae,P as D,Q as O,u as ee,_ as Le}from"./index-DjEpm9CG.js";const q={QuarkCookie:"夸克cookie",QuarkTransferPath:"夸克转存路径",QuarkSharePassword:"夸克分享密码",BaiduCookie:"百度cookie",BaiduTransferPath:"百度转存路径",BaiduSharePassword:"百度分享密码",BaiduRandomPassword:"百度是否随机密码",BaiduAdSavePath:"百度广告回收站路径",TransferAdMessage:"转存广告词",SearchKeyword:"搜索词",EnableLocalSearch:"是否开启本地搜索",SearchSuccessLocalReplyPrefix:"本地搜索成功回复前缀",SearchResultLocalTemplate:"本地搜索结果模板",SearchSuccessLocalReplySuffix:"本地搜索成功回复后缀",SearchFailureLocalReply:"本地搜索失败回复",LocalDisplayCount:"本地显示条数",ContinueAPISearch:"本地搜索成功继续API搜索",LocalAccurateSearch:"本地数据精确搜索",LocalBlockKeywords:"本地数据名称屏蔽关键词",LocalOnlyProvideKeywords:"本地数据名称只出关键词",EnableAPISearch:"开启接口搜索",SearchPreMessage:"搜索前置消息",SearchSuccessAPIReplyPrefix:"搜索成功回复前缀",SearchResultAPITemplate:"搜索结果模板",SearchSuccessAPIReplySuffix:"搜索成功回复后缀",SearchResultAPIDataTemplate:"转存后结果模板",SearchFailureAPIReply:"搜索失败回复",SearchPageSize:"搜索结果分页大小",EnabledCloudTypes:"启用网盘类型",APIEndpoint:"启用接口",JumpPageCommand:"跳页",SaveToLocalDB:"分享后保存到本地",DirectShowLink:"直接显示链接",APIBlockKeywords:"名称屏蔽关键词",APIOnlyProvideKeywords:"名称只出关键词"},Te=[{label:"百度网盘",value:"百度网盘"},{label:"夸克网盘",value:"夸克网盘"},{label:"UC网盘",value:"UC网盘",disabled:!0},{label:"阿里网盘",value:"阿里网盘",disabled:!0},{label:"迅雷网盘",value:"迅雷网盘",disabled:!0},{label:"其他",value:"其他",disabled:!0}],Ie=[{label:"kk大厅",value:"kk大厅"},{label:"kk短剧",value:"kk短剧"},{label:"kk橘子资源",value:"kk橘子资源"},{label:"kk小宇",value:"kk小宇"},{label:"kk小悠",value:"kk小悠"},{label:"kk天天追剧",value:"kk天天追剧"},{label:"趣盘搜",value:"趣盘搜"},{label:"酷乐—百度",value:"酷乐—百度"},{label:"酷乐—夸克",value:"酷乐—夸克"},{label:"爱看短剧",value:"爱看短剧"},{label:"ycubbs",value:"ycubbs"},{label:"梦牵云",value:"梦牵云"},{label:"龙珠-短剧",value:"龙珠-短剧"},{label:"6789o(速度很慢)",value:"6789o"},{label:"哈宝",value:"哈宝"}],Ue={class:"global-config-container"},_e={class:"card-header"},Be={class:"cookie-input"},Re={class:"cookie-header"},Ke={class:"cookie-input"},Ee={class:"cookie-header"},De={class:"password-container"},Oe=we({__name:"index",setup(z){const U=d("disk"),p=d(["quark","baidu","transfer","localSearch","apiSearch"]),a=d({}),y=d([]),w=d([]),x=d([]),f=d([]),m=d(0),S=d(0),_=d([]),B=d([]),R=d([]),K=d([]),Q=d(""),J=d(!1),E=d(!1);d({});const N=d([]),$=d([]),j=d(!1),M=d("quark");function G(){return b(this,null,function*(){try{const t=yield ke();t.code===200&&(N.value=t.data)}catch(t){console.error("加载百度cookie失败:",t)}})}function H(){return b(this,null,function*(){try{const t=yield ge();t.code===200&&($.value=t.data)}catch(t){console.error("加载夸克cookie失败:",t)}})}const le=t=>{a.value.LocalDisplayCount=t.toString()},ae=t=>{a.value.SearchPageSize=t.toString()},oe=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.TransferAdMessage=e.join("|")},te=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.SearchKeyword=e.join("|")},ue=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.LocalBlockKeywords=e.join("|")},se=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.LocalOnlyProvideKeywords=e.join("|")},ne=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.APIBlockKeywords=e.join("|")},de=t=>{const e=t.map(s=>s.trim()).filter(s=>s!=="");a.value.APIOnlyProvideKeywords=e.join("|")};V(y,t=>{oe(t)}),V(w,t=>{te(t)}),V(_,t=>{ue(t)}),V(B,t=>{se(t)}),V(R,t=>{ne(t)}),V(K,t=>{de(t)}),V(x,t=>{a.value.EnabledCloudTypes=t.join(",")}),V(f,t=>{a.value.APIEndpoint=t.join(",")});const re=()=>{Object.keys(q).forEach(t=>{a.value[t]=""})},ie=()=>b(this,null,function*(){try{const t=yield Ve({robot_id:Q.value,contact_id:"全局配置"});t!=null&&t.data&&(Object.entries(t.data).forEach(([e,s])=>{var k;const v=(k=Object.entries(q).find(([r,n])=>n===e))==null?void 0:k[0];v&&(a.value[v]=s)}),a.value.TransferAdMessage&&(y.value=a.value.TransferAdMessage.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.SearchKeyword&&(w.value=a.value.SearchKeyword.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.LocalBlockKeywords&&(_.value=a.value.LocalBlockKeywords.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.LocalOnlyProvideKeywords&&(B.value=a.value.LocalOnlyProvideKeywords.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.APIBlockKeywords&&(R.value=a.value.APIBlockKeywords.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.APIOnlyProvideKeywords&&(K.value=a.value.APIOnlyProvideKeywords.split("|").map(e=>e.trim()).filter(e=>e!=="")),a.value.EnabledCloudTypes&&(x.value=a.value.EnabledCloudTypes.split(",")),a.value.APIEndpoint&&(f.value=a.value.APIEndpoint.split(",")),a.value.LocalDisplayCount&&(m.value=parseInt(a.value.LocalDisplayCount)||0),a.value.SearchPageSize&&(S.value=parseInt(a.value.SearchPageSize)||0))}catch(t){console.error("加载配置失败:",t),L.error("加载配置失败")}finally{J.value=!1}}),me=()=>b(this,null,function*(){E.value=!0;try{const t={};Object.entries(a.value).forEach(([e,s])=>{const v=q[e];v&&(t[v]=s)}),yield Se({robot_id:Q.value,contact_id:"全局配置",configs:t}),L.success("保存成功")}catch(t){console.error("保存配置失败:",t),L.error("保存配置失败")}finally{E.value=!1}}),ve=()=>b(this,null,function*(){var t;try{const e=yield ye();return(t=e==null?void 0:e.data)!=null&&t.robot_id?(Q.value=e.data.robot_id,!0):!1}catch(e){return console.error("获取机器人信息失败:",e),L.error("获取机器人信息失败"),!1}});xe(()=>b(this,null,function*(){if(re(),!(yield ve())){L.error("未找到可用的机器人");return}yield ie(),G(),H()}));function W(t){M.value=t,j.value=!0}function ce(){return b(this,null,function*(){M.value==="quark"?yield H():yield G()})}return(t,e)=>{const s=i("el-button"),v=i("el-option"),k=i("el-select"),r=i("el-input"),n=i("el-form-item"),C=i("el-form"),A=i("el-collapse-item"),g=i("el-switch"),X=i("el-collapse"),Y=i("el-tab-pane"),Z=i("el-input-number"),pe=i("el-tabs"),fe=i("el-card"),be=he("loading");return c(),T("div",Ue,[Ce((c(),I(fe,{"element-loading-text":"加载中..."},{header:u(()=>[P("div",_e,[e[43]||(e[43]=P("span",{class:"header-title"},"全局配置",-1)),o(s,{type:"primary",loading:E.value,class:"save-button",onClick:me},{default:u(()=>[F(Ae(E.value?"保存中...":"保存配置"),1)]),_:1},8,["loading"])])]),default:u(()=>[o(pe,{modelValue:U.value,"onUpdate:modelValue":e[41]||(e[41]=l=>U.value=l),class:"config-tabs"},{default:u(()=>[o(Y,{label:"网盘配置",name:"disk"},{default:u(()=>[o(X,{modelValue:p.value,"onUpdate:modelValue":e[13]||(e[13]=l=>p.value=l),class:"config-collapse"},{default:u(()=>[o(A,{title:"夸克网盘",name:"quark"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(n,{label:"夸克cookie"},{default:u(()=>[P("div",Be,[P("div",Re,[o(k,{modelValue:a.value.QuarkCookie,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.QuarkCookie=l),filterable:"",placeholder:"快速选择",style:{width:"100%"}},{default:u(()=>[(c(!0),T(D,null,O($.value,l=>(c(),I(v,{key:l.id,label:l.name,value:l.result},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(s,{type:"success",onClick:e[1]||(e[1]=l=>W("quark"))},{default:u(()=>e[44]||(e[44]=[F(" 登录 ")])),_:1})]),o(r,{modelValue:a.value.QuarkCookie,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.QuarkCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])])]),_:1}),o(n,{label:"夸克转存路径"},{default:u(()=>[o(r,{modelValue:a.value.QuarkTransferPath,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.QuarkTransferPath=l)},null,8,["modelValue"])]),_:1}),o(n,{label:"夸克分享密码"},{default:u(()=>[o(r,{modelValue:a.value.QuarkSharePassword,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.QuarkSharePassword=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),o(A,{title:"百度网盘",name:"baidu"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(n,{label:"百度cookie"},{default:u(()=>[P("div",Ke,[P("div",Ee,[o(k,{modelValue:a.value.BaiduCookie,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.BaiduCookie=l),filterable:"",placeholder:"快速选择",style:{width:"100%"}},{default:u(()=>[(c(!0),T(D,null,O(N.value,l=>(c(),I(v,{key:l.id,label:l.name,value:l.result},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(s,{type:"success",onClick:e[6]||(e[6]=l=>W("baidu"))},{default:u(()=>e[45]||(e[45]=[F(" 登录 ")])),_:1})]),o(r,{modelValue:a.value.BaiduCookie,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.BaiduCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])])]),_:1}),o(n,{label:"百度转存路径"},{default:u(()=>[o(r,{modelValue:a.value.BaiduTransferPath,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.BaiduTransferPath=l)},null,8,["modelValue"])]),_:1}),o(n,{label:"百度分享密码"},{default:u(()=>[P("div",De,[o(r,{modelValue:a.value.BaiduSharePassword,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.BaiduSharePassword=l)},null,8,["modelValue"]),o(g,{modelValue:a.value.BaiduRandomPassword,"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.BaiduRandomPassword=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":"","active-text":"随机密码","inactive-text":"固定密码",class:"password-switch"},null,8,["modelValue"])])]),_:1}),o(n,{label:"百度广告回收站路径"},{default:u(()=>[o(r,{modelValue:a.value.BaiduAdSavePath,"onUpdate:modelValue":e[11]||(e[11]=l=>a.value.BaiduAdSavePath=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),o(A,{title:"转存配置",name:"transfer"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(h,{modelValue:y.value,"onUpdate:modelValue":e[12]||(e[12]=l=>y.value=l),title:"转存广告词","button-text":"广告词"},null,8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(Y,{label:"搜索配置",name:"search"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(n,{label:"搜索词"},{default:u(()=>[o(h,{modelValue:w.value,"onUpdate:modelValue":e[14]||(e[14]=l=>w.value=l),title:"","button-text":"搜索词"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(X,{modelValue:p.value,"onUpdate:modelValue":e[40]||(e[40]=l=>p.value=l),class:"config-collapse"},{default:u(()=>[o(A,{title:"本地搜索",name:"localSearch"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(n,{label:"是否开启本地搜索"},{default:u(()=>[o(g,{modelValue:a.value.EnableLocalSearch,"onUpdate:modelValue":e[15]||(e[15]=l=>a.value.EnableLocalSearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(n,{label:"本地搜索成功回复前缀"},{default:u(()=>[o(r,{modelValue:a.value.SearchSuccessLocalReplyPrefix,"onUpdate:modelValue":e[16]||(e[16]=l=>a.value.SearchSuccessLocalReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"本地搜索结果模板"},{default:u(()=>[o(r,{modelValue:a.value.SearchResultLocalTemplate,"onUpdate:modelValue":e[17]||(e[17]=l=>a.value.SearchResultLocalTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"本地搜索成功回复后缀"},{default:u(()=>[o(r,{modelValue:a.value.SearchSuccessLocalReplySuffix,"onUpdate:modelValue":e[18]||(e[18]=l=>a.value.SearchSuccessLocalReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"本地搜索失败回复"},{default:u(()=>[o(r,{modelValue:a.value.SearchFailureLocalReply,"onUpdate:modelValue":e[19]||(e[19]=l=>a.value.SearchFailureLocalReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"本地显示条数"},{default:u(()=>[o(Z,{modelValue:m.value,"onUpdate:modelValue":e[20]||(e[20]=l=>m.value=l),min:0,max:10,class:"number-input",onChange:le},null,8,["modelValue"])]),_:1}),o(n,{label:"本地搜索成功继续API搜索"},{default:u(()=>[o(g,{modelValue:a.value.ContinueAPISearch,"onUpdate:modelValue":e[21]||(e[21]=l=>a.value.ContinueAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(n,{label:"本地数据精确搜索"},{default:u(()=>[o(g,{modelValue:a.value.LocalAccurateSearch,"onUpdate:modelValue":e[22]||(e[22]=l=>a.value.LocalAccurateSearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(h,{modelValue:_.value,"onUpdate:modelValue":e[23]||(e[23]=l=>_.value=l),title:"本地数据名称屏蔽关键词","button-text":"屏蔽关键词"},null,8,["modelValue"]),o(h,{modelValue:B.value,"onUpdate:modelValue":e[24]||(e[24]=l=>B.value=l),title:"本地数据名称只出关键词","button-text":"只出关键词"},null,8,["modelValue"])]),_:1},8,["model"])]),_:1}),o(A,{title:"API接口搜索",name:"apiSearch"},{default:u(()=>[o(C,{model:a.value,"label-width":"180px",class:"config-form"},{default:u(()=>[o(n,{label:"开启接口搜索"},{default:u(()=>[o(g,{modelValue:a.value.EnableAPISearch,"onUpdate:modelValue":e[25]||(e[25]=l=>a.value.EnableAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索前置消息"},{default:u(()=>[o(r,{modelValue:a.value.SearchPreMessage,"onUpdate:modelValue":e[26]||(e[26]=l=>a.value.SearchPreMessage=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索成功回复前缀"},{default:u(()=>[o(r,{modelValue:a.value.SearchSuccessAPIReplyPrefix,"onUpdate:modelValue":e[27]||(e[27]=l=>a.value.SearchSuccessAPIReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索结果模板"},{default:u(()=>[o(r,{modelValue:a.value.SearchResultAPITemplate,"onUpdate:modelValue":e[28]||(e[28]=l=>a.value.SearchResultAPITemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索成功回复后缀"},{default:u(()=>[o(r,{modelValue:a.value.SearchSuccessAPIReplySuffix,"onUpdate:modelValue":e[29]||(e[29]=l=>a.value.SearchSuccessAPIReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"转存后结果模板"},{default:u(()=>[o(r,{modelValue:a.value.SearchResultAPIDataTemplate,"onUpdate:modelValue":e[30]||(e[30]=l=>a.value.SearchResultAPIDataTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索失败回复"},{default:u(()=>[o(r,{modelValue:a.value.SearchFailureAPIReply,"onUpdate:modelValue":e[31]||(e[31]=l=>a.value.SearchFailureAPIReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"搜索结果分页大小"},{default:u(()=>[o(Z,{modelValue:S.value,"onUpdate:modelValue":e[32]||(e[32]=l=>S.value=l),min:0,max:10,class:"number-input",onChange:ae},null,8,["modelValue"])]),_:1}),o(n,{label:"启用网盘类型"},{default:u(()=>[o(k,{modelValue:x.value,"onUpdate:modelValue":e[33]||(e[33]=l=>x.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择网盘类型",class:"full-width-select"},{default:u(()=>[(c(!0),T(D,null,O(ee(Te),l=>(c(),I(v,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"启用接口"},{default:u(()=>[o(k,{modelValue:f.value,"onUpdate:modelValue":e[34]||(e[34]=l=>f.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择接口",class:"full-width-select"},{default:u(()=>[(c(!0),T(D,null,O(ee(Ie),l=>(c(),I(v,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"跳页"},{default:u(()=>[o(r,{modelValue:a.value.JumpPageCommand,"onUpdate:modelValue":e[35]||(e[35]=l=>a.value.JumpPageCommand=l)},null,8,["modelValue"])]),_:1}),o(n,{label:"分享后保存到本地"},{default:u(()=>[o(g,{modelValue:a.value.SaveToLocalDB,"onUpdate:modelValue":e[36]||(e[36]=l=>a.value.SaveToLocalDB=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(n,{label:"直接显示链接"},{default:u(()=>[o(g,{modelValue:a.value.DirectShowLink,"onUpdate:modelValue":e[37]||(e[37]=l=>a.value.DirectShowLink=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),o(h,{modelValue:R.value,"onUpdate:modelValue":e[38]||(e[38]=l=>R.value=l),title:"名称屏蔽关键词","button-text":"屏蔽关键词"},null,8,["modelValue"]),o(h,{modelValue:K.value,"onUpdate:modelValue":e[39]||(e[39]=l=>K.value=l),title:"名称只出关键词","button-text":"只出关键词"},null,8,["modelValue"])]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[be,J.value]]),o(Pe,{visible:j.value,"onUpdate:visible":e[42]||(e[42]=l=>j.value=l),type:M.value,"on-refresh":ce},null,8,["visible","type"])])}}}),ze=Le(Oe,[["__scopeId","data-v-4bef8159"]]);export{ze as default};
