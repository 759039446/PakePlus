var I=(h,y,m)=>new Promise((t,v)=>{var f=p=>{try{V(m.next(p))}catch(S){v(S)}},k=p=>{try{V(m.throw(p))}catch(S){v(S)}},V=p=>p.done?t(p.value):Promise.resolve(p.value).then(f,k);V((m=m.apply(h,y)).next())});import{d as ge,n as d,I as te,x as ye,aC as A,c as T,w as ke,g as b,h as o,r as i,j as _e,o as c,e as R,b as a,f as U,T as Q,P as B,Q as E,aD as oe,u as D,aE as ue,W as se,_ as Pe}from"./index-DnTyjkzv.js";import{g as he,a as we,u as xe}from"./robotLogin-CpDtnZuK.js";const M={QuarkCookie:"夸克cookie",QuarkTransferPath:"夸克转存路径",QuarkSharePassword:"夸克分享密码",BaiduCookie:"百度cookie",BaiduTransferPath:"百度转存路径",BaiduSharePassword:"百度分享密码",BaiduRandomPassword:"百度是否随机密码",BaiduAdSavePath:"百度广告回收站路径",TransferAdMessage:"转存广告词",SearchKeyword:"搜索词",EnableLocalSearch:"是否开启本地搜索",SearchSuccessLocalReplyPrefix:"本地搜索成功回复前缀",SearchResultLocalTemplate:"本地搜索结果模板",SearchSuccessLocalReplySuffix:"本地搜索成功回复后缀",SearchFailureLocalReply:"本地搜索失败回复",LocalDisplayCount:"本地显示条数",ContinueAPISearch:"本地搜索成功继续API搜索",EnableAPISearch:"开启接口搜索",SearchPreMessage:"搜索前置消息",SearchSuccessAPIReplyPrefix:"搜索成功回复前缀",SearchResultAPITemplate:"搜索结果模板",SearchSuccessAPIReplySuffix:"搜索成功回复后缀",SearchResultAPIDataTemplate:"转存后结果模板",SearchFailureAPIReply:"搜索失败回复",SearchPageSize:"搜索结果分页大小",EnabledCloudTypes:"启用网盘类型",APIEndpoint:"启用接口",JumpPageCommand:"跳页",SaveToLocalDB:"分享后保存到本地",DirectShowLink:"直接显示链接"};Object.entries(M).reduce((h,[y,m])=>(h[m]=y,h),{});const Ce=[{label:"百度网盘",value:"百度网盘"},{label:"夸克网盘",value:"夸克网盘"},{label:"UC网盘",value:"UC网盘",disabled:!0},{label:"阿里网盘",value:"阿里网盘",disabled:!0},{label:"迅雷网盘",value:"迅雷网盘",disabled:!0},{label:"其他",value:"其他",disabled:!0}],Ie=[{label:"kk大厅",value:"kk大厅"},{label:"kk短剧",value:"kk短剧"},{label:"kk橘子资源",value:"kk橘子资源"},{label:"kk小宇",value:"kk小宇"},{label:"kk小悠",value:"kk小悠"},{label:"kk天天追剧",value:"kk天天追剧"},{label:"趣盘搜",value:"趣盘搜"},{label:"酷乐—百度",value:"酷乐—百度"},{label:"酷乐—夸克",value:"酷乐—夸克"}],Ae={class:"global-config-container"},Te={class:"card-header"},Re={class:"password-container"},Ue={class:"tag-input-container"},Le={class:"tag-input-container"},Be=ge({__name:"index",setup(h){const y=d("disk"),m=d(["quark","baidu","transfer","localSearch","apiSearch"]),t=d({}),v=d([]),f=d([]),k=d([]),V=d([]),p=d(0),S=d(0),K=d(!1),w=d(""),F=d(),j=d(!1),x=d(""),O=d(),z=d(""),J=d(!1),L=d(!1);d({});const ne=()=>{K.value=!0,se(()=>{var u,e;(e=(u=F.value)==null?void 0:u.input)==null||e.focus()})},de=()=>{j.value=!0,se(()=>{var u,e;(e=(u=O.value)==null?void 0:u.input)==null||e.focus()})},N=()=>{if(w.value){const u=w.value.trim();u&&!v.value.includes(u)&&(v.value.push(u),W(v.value))}K.value=!1,w.value=""},q=()=>{if(x.value){const u=x.value.trim();u&&!f.value.includes(u)&&(f.value.push(u),G(f.value))}j.value=!1,x.value=""},$=(u,e)=>{u==="transferAdMessage"?(v.value.splice(e,1),W(v.value)):(f.value.splice(e,1),G(f.value))},re=u=>{t.value.LocalDisplayCount=u.toString()},ie=u=>{t.value.SearchPageSize=u.toString()},ce=()=>{Object.keys(M).forEach(u=>{t.value[u]=""})},W=u=>{const e=u.map(r=>r.trim()).filter(r=>r!=="");t.value.TransferAdMessage=e.join("|")},G=u=>{const e=u.map(r=>r.trim()).filter(r=>r!=="");t.value.SearchKeyword=e.join("|")};te(k,u=>{t.value.EnabledCloudTypes=u.join(",")}),te(V,u=>{t.value.APIEndpoint=u.join(",")});const me=()=>I(this,null,function*(){try{const u=yield he({robot_id:z.value,contact_id:"全局配置"});u!=null&&u.data&&(Object.entries(u.data).forEach(([e,r])=>{var s;const n=(s=Object.entries(M).find(([_,g])=>g===e))==null?void 0:s[0];n&&(t.value[n]=r)}),t.value.TransferAdMessage&&(v.value=t.value.TransferAdMessage.split("|").map(e=>e.trim()).filter(e=>e!=="")),t.value.SearchKeyword&&(f.value=t.value.SearchKeyword.split("|").map(e=>e.trim()).filter(e=>e!=="")),t.value.EnabledCloudTypes&&(k.value=t.value.EnabledCloudTypes.split(",")),t.value.APIEndpoint&&(V.value=t.value.APIEndpoint.split(",")),t.value.LocalDisplayCount&&(p.value=parseInt(t.value.LocalDisplayCount)||0),t.value.SearchPageSize&&(S.value=parseInt(t.value.SearchPageSize)||0))}catch(u){console.error("加载配置失败:",u),A.error("加载配置失败")}finally{J.value=!1}}),pe=()=>I(this,null,function*(){L.value=!0;try{const u={};Object.entries(t.value).forEach(([e,r])=>{const n=M[e];n&&(u[n]=r)}),yield xe({robot_id:z.value,contact_id:"全局配置",configs:u}),A.success("保存成功")}catch(u){console.error("保存配置失败:",u),A.error("保存配置失败")}finally{L.value=!1}}),ve=()=>I(this,null,function*(){var u;try{const e=yield we();return(u=e==null?void 0:e.data)!=null&&u.robot_id?(z.value=e.data.robot_id,!0):!1}catch(e){return console.error("获取机器人信息失败:",e),A.error("获取机器人信息失败"),!1}});return ye(()=>I(this,null,function*(){if(ce(),!(yield ve())){A.error("未找到可用的机器人");return}yield me()})),(u,e)=>{const r=i("el-button"),n=i("el-input"),s=i("el-form-item"),_=i("el-form"),g=i("el-collapse-item"),P=i("el-switch"),H=i("el-tag"),X=i("el-icon"),Y=i("el-collapse"),Z=i("el-tab-pane"),ee=i("el-input-number"),le=i("el-option"),ae=i("el-select"),fe=i("el-tabs"),be=i("el-card"),Ve=_e("loading");return c(),T("div",Ae,[ke((c(),b(be,{"element-loading-text":"加载中..."},{header:o(()=>[R("div",Te,[e[33]||(e[33]=R("span",{class:"header-title"},"全局配置",-1)),a(r,{type:"primary",onClick:pe,loading:L.value,class:"save-button"},{default:o(()=>[U(Q(L.value?"保存中...":"保存配置"),1)]),_:1},8,["loading"])])]),default:o(()=>[a(fe,{modelValue:y.value,"onUpdate:modelValue":e[32]||(e[32]=l=>y.value=l),class:"config-tabs"},{default:o(()=>[a(Z,{label:"网盘配置",name:"disk"},{default:o(()=>[a(Y,{modelValue:m.value,"onUpdate:modelValue":e[10]||(e[10]=l=>m.value=l),class:"config-collapse"},{default:o(()=>[a(g,{title:"夸克网盘",name:"quark"},{default:o(()=>[a(_,{model:t.value,"label-width":"180px",class:"config-form"},{default:o(()=>[a(s,{label:"夸克cookie"},{default:o(()=>[a(n,{modelValue:t.value.QuarkCookie,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.QuarkCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"夸克转存路径"},{default:o(()=>[a(n,{modelValue:t.value.QuarkTransferPath,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.QuarkTransferPath=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"夸克分享密码"},{default:o(()=>[a(n,{modelValue:t.value.QuarkSharePassword,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.QuarkSharePassword=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(g,{title:"百度网盘",name:"baidu"},{default:o(()=>[a(_,{model:t.value,"label-width":"180px",class:"config-form"},{default:o(()=>[a(s,{label:"百度cookie"},{default:o(()=>[a(n,{modelValue:t.value.BaiduCookie,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.BaiduCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"百度转存路径"},{default:o(()=>[a(n,{modelValue:t.value.BaiduTransferPath,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.BaiduTransferPath=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"百度分享密码"},{default:o(()=>[R("div",Re,[a(n,{modelValue:t.value.BaiduSharePassword,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.BaiduSharePassword=l)},null,8,["modelValue"]),a(P,{modelValue:t.value.BaiduRandomPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.BaiduRandomPassword=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":"","active-text":"随机密码","inactive-text":"固定密码",class:"password-switch"},null,8,["modelValue"])])]),_:1}),a(s,{label:"百度广告回收站路径"},{default:o(()=>[a(n,{modelValue:t.value.BaiduAdSavePath,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.BaiduAdSavePath=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(g,{title:"转存配置",name:"transfer"},{default:o(()=>[a(_,{model:t.value,"label-width":"180px",class:"config-form"},{default:o(()=>[a(s,{label:"转存广告词"},{default:o(()=>[R("div",Ue,[(c(!0),T(B,null,E(v.value,(l,C)=>(c(),b(H,{key:C,closable:"",onClose:Se=>$("transferAdMessage",C),class:"tag-item"},{default:o(()=>[U(Q(l),1)]),_:2},1032,["onClose"]))),128)),K.value?(c(),b(n,{key:0,ref_key:"transferAdMessageInputRef",ref:F,modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=l=>w.value=l),class:"tag-input",size:"small",onKeyup:oe(N,["enter"]),onBlur:N},null,8,["modelValue"])):(c(),b(r,{key:1,class:"add-tag-button",size:"small",onClick:ne},{default:o(()=>[a(X,null,{default:o(()=>[a(D(ue))]),_:1}),e[34]||(e[34]=U(" 添加广告词 "))]),_:1}))])]),_:1}),a(s,{label:"搜索词"},{default:o(()=>[R("div",Le,[(c(!0),T(B,null,E(f.value,(l,C)=>(c(),b(H,{key:C,closable:"",onClose:Se=>$("searchKeyword",C),class:"tag-item"},{default:o(()=>[U(Q(l),1)]),_:2},1032,["onClose"]))),128)),j.value?(c(),b(n,{key:0,ref_key:"searchKeywordInputRef",ref:O,modelValue:x.value,"onUpdate:modelValue":e[9]||(e[9]=l=>x.value=l),class:"tag-input",size:"small",onKeyup:oe(q,["enter"]),onBlur:q},null,8,["modelValue"])):(c(),b(r,{key:1,class:"add-tag-button",size:"small",onClick:de},{default:o(()=>[a(X,null,{default:o(()=>[a(D(ue))]),_:1}),e[35]||(e[35]=U(" 添加搜索词 "))]),_:1}))])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Z,{label:"搜索配置",name:"search"},{default:o(()=>[a(Y,{modelValue:m.value,"onUpdate:modelValue":e[31]||(e[31]=l=>m.value=l),class:"config-collapse"},{default:o(()=>[a(g,{title:"本地搜索",name:"localSearch"},{default:o(()=>[a(_,{model:t.value,"label-width":"180px",class:"config-form"},{default:o(()=>[a(s,{label:"是否开启本地搜索"},{default:o(()=>[a(P,{modelValue:t.value.EnableLocalSearch,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.EnableLocalSearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功回复前缀"},{default:o(()=>[a(n,{modelValue:t.value.SearchSuccessLocalReplyPrefix,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.SearchSuccessLocalReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索结果模板"},{default:o(()=>[a(n,{modelValue:t.value.SearchResultLocalTemplate,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.SearchResultLocalTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功回复后缀"},{default:o(()=>[a(n,{modelValue:t.value.SearchSuccessLocalReplySuffix,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.SearchSuccessLocalReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索失败回复"},{default:o(()=>[a(n,{modelValue:t.value.SearchFailureLocalReply,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.SearchFailureLocalReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地显示条数"},{default:o(()=>[a(ee,{modelValue:p.value,"onUpdate:modelValue":e[16]||(e[16]=l=>p.value=l),min:0,max:10,onChange:re,class:"number-input"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功继续API搜索"},{default:o(()=>[a(P,{modelValue:t.value.ContinueAPISearch,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.ContinueAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(g,{title:"API接口搜索",name:"apiSearch"},{default:o(()=>[a(_,{model:t.value,"label-width":"180px",class:"config-form"},{default:o(()=>[a(s,{label:"开启接口搜索"},{default:o(()=>[a(P,{modelValue:t.value.EnableAPISearch,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.EnableAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索前置消息"},{default:o(()=>[a(n,{modelValue:t.value.SearchPreMessage,"onUpdate:modelValue":e[19]||(e[19]=l=>t.value.SearchPreMessage=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索成功回复前缀"},{default:o(()=>[a(n,{modelValue:t.value.SearchSuccessAPIReplyPrefix,"onUpdate:modelValue":e[20]||(e[20]=l=>t.value.SearchSuccessAPIReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索结果模板"},{default:o(()=>[a(n,{modelValue:t.value.SearchResultAPITemplate,"onUpdate:modelValue":e[21]||(e[21]=l=>t.value.SearchResultAPITemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索成功回复后缀"},{default:o(()=>[a(n,{modelValue:t.value.SearchSuccessAPIReplySuffix,"onUpdate:modelValue":e[22]||(e[22]=l=>t.value.SearchSuccessAPIReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"转存后结果模板"},{default:o(()=>[a(n,{modelValue:t.value.SearchResultAPIDataTemplate,"onUpdate:modelValue":e[23]||(e[23]=l=>t.value.SearchResultAPIDataTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索失败回复"},{default:o(()=>[a(n,{modelValue:t.value.SearchFailureAPIReply,"onUpdate:modelValue":e[24]||(e[24]=l=>t.value.SearchFailureAPIReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索结果分页大小"},{default:o(()=>[a(ee,{modelValue:S.value,"onUpdate:modelValue":e[25]||(e[25]=l=>S.value=l),min:0,max:10,onChange:ie,class:"number-input"},null,8,["modelValue"])]),_:1}),a(s,{label:"启用网盘类型"},{default:o(()=>[a(ae,{modelValue:k.value,"onUpdate:modelValue":e[26]||(e[26]=l=>k.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择网盘类型",class:"full-width-select"},{default:o(()=>[(c(!0),T(B,null,E(D(Ce),l=>(c(),b(le,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"启用接口"},{default:o(()=>[a(ae,{modelValue:V.value,"onUpdate:modelValue":e[27]||(e[27]=l=>V.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择接口",class:"full-width-select"},{default:o(()=>[(c(!0),T(B,null,E(D(Ie),l=>(c(),b(le,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"跳页"},{default:o(()=>[a(n,{modelValue:t.value.JumpPageCommand,"onUpdate:modelValue":e[28]||(e[28]=l=>t.value.JumpPageCommand=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"分享后保存到本地"},{default:o(()=>[a(P,{modelValue:t.value.SaveToLocalDB,"onUpdate:modelValue":e[29]||(e[29]=l=>t.value.SaveToLocalDB=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"直接显示链接"},{default:o(()=>[a(P,{modelValue:t.value.DirectShowLink,"onUpdate:modelValue":e[30]||(e[30]=l=>t.value.DirectShowLink=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})),[[Ve,J.value]])])}}}),Ke=Pe(Be,[["__scopeId","data-v-7e8479f8"]]);export{Ke as default};
