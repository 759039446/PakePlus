var k=(A,_,p)=>new Promise((t,v)=>{var f=m=>{try{S(p.next(m))}catch(y){v(y)}},w=m=>{try{S(p.throw(m))}catch(y){v(y)}},S=m=>m.done?t(m.value):Promise.resolve(m.value).then(f,w);S((p=p.apply(A,_)).next())});import{d as xe,n as r,I as te,x as Ae,aw as b,c as L,b as a,h as u,r as i,o as c,e as U,u as B,ax as Ie,f as D,P as M,Q as K,g as V,T as oe,ay as ue,az as se,W as ne,_ as Te}from"./index-CfL6Toq2.js";import{q as Ce,a as Re,g as Le,b as Ue,u as Be}from"./robotLogin-vFEH4qaI.js";const F={QuarkCookie:"夸克cookie",QuarkTransferPath:"夸克转存路径",QuarkSharePassword:"夸克分享密码",BaiduCookie:"百度cookie",BaiduTransferPath:"百度转存路径",BaiduSharePassword:"百度分享密码",BaiduRandomPassword:"百度是否随机密码",BaiduAdSavePath:"百度广告回收站路径",TransferAdMessage:"转存广告词",SearchKeyword:"搜索词",EnableLocalSearch:"是否开启本地搜索",SearchSuccessLocalReplyPrefix:"本地搜索成功回复前缀",SearchResultLocalTemplate:"本地搜索结果模板",SearchSuccessLocalReplySuffix:"本地搜索成功回复后缀",SearchFailureLocalReply:"本地搜索失败回复",LocalDisplayCount:"本地显示条数",ContinueAPISearch:"本地搜索成功继续API搜索",EnableAPISearch:"开启接口搜索",SearchPreMessage:"搜索前置消息",SearchSuccessAPIReplyPrefix:"搜索成功回复前缀",SearchResultAPITemplate:"搜索结果模板",SearchSuccessAPIReplySuffix:"搜索成功回复后缀",SearchResultAPIDataTemplate:"转存后结果模板",SearchFailureAPIReply:"搜索失败回复",SearchPageSize:"搜索结果分页大小",EnabledCloudTypes:"启用网盘类型",APIEndpoint:"启用接口",JumpPageCommand:"跳页",SaveToLocalDB:"分享后保存到本地",DirectShowLink:"直接显示链接"};Object.entries(F).reduce((A,[_,p])=>(A[p]=_,A),{});const De=[{label:"百度网盘",value:"百度网盘"},{label:"夸克网盘",value:"夸克网盘"},{label:"UC网盘",value:"UC网盘",disabled:!0},{label:"阿里网盘",value:"阿里网盘",disabled:!0},{label:"迅雷网盘",value:"迅雷网盘",disabled:!0},{label:"其他",value:"其他",disabled:!0}],Ee=[{label:"kk大厅",value:"kk大厅"},{label:"kk短剧",value:"kk短剧"},{label:"kk橘子资源",value:"kk橘子资源"},{label:"kk小宇",value:"kk小宇"},{label:"kk小悠",value:"kk小悠"},{label:"kk天天追剧",value:"kk天天追剧"},{label:"趣盘搜",value:"趣盘搜"},{label:"酷乐—百度",value:"酷乐—百度"},{label:"酷乐—夸克",value:"酷乐—夸克"}],Me={class:"global-config-container"},Ke={class:"card-header"},Qe={class:"password-container"},ze={class:"tag-input-container"},Fe={class:"tag-input-container"},je=xe({__name:"index",setup(A){const _=r("disk"),p=r(["quark","baidu","transfer","localSearch","apiSearch"]),t=r({}),v=r([]),f=r([]),w=r([]),S=r([]),m=r(0),y=r(0),E=r(!1),j=r(!1),re=r("全局配置"),Q=r(!1),I=r(""),q=r(),z=r(!1),T=r(""),N=r(),g=r(""),de=r([]),ie=r([]),ce=r([]),pe=r([]),O=r({}),me=()=>k(this,null,function*(){try{const o=yield Ce({robot_id:g.value,page:1,page_size:1e3});if(o!=null&&o.list){de.value=o.list;const e=[{contact_id:g.value,name:"机器人",children:o.list.map(n=>({contact_id:n.contact_id,name:n.name,remark:n.remark}))}];ie.value=e}}catch(o){console.error("加载好友列表失败:",o),b.error("加载好友列表失败")}}),ve=()=>k(this,null,function*(){try{const o=yield Re({robot_id:g.value,page:1,page_size:1e3});o!=null&&o.list&&(ce.value=o.list,pe.value=[{contact_id:g.value,name:"机器人",children:o.list.map(e=>({contact_id:e.contact_id,name:e.remark?`${e.name} (${e.remark})`:e.name,remark:e.remark}))}])}catch(o){console.error("加载群聊列表失败:",o),b.error("加载群聊列表失败")}}),fe=o=>k(this,null,function*(){E.value=!0;try{const e=yield Le({robot_id:g.value,contact_id:o});e!=null&&e.data&&(e.data.forEach(n=>{var d;const h=(d=Object.entries(F).find(([s,P])=>P===n.config_name))==null?void 0:d[0];h&&(t.value[h]=n.value,O.value[h]=n.contact_id==="全局配置"?"开启":"关闭")}),t.value.TransferAdMessage&&(v.value=t.value.TransferAdMessage.split("|").map(n=>n.trim()).filter(n=>n!=="")),t.value.SearchKeyword&&(f.value=t.value.SearchKeyword.split("|").map(n=>n.trim()).filter(n=>n!=="")),t.value.EnabledCloudTypes&&(w.value=t.value.EnabledCloudTypes.split(",")),t.value.APIEndpoint&&(S.value=t.value.APIEndpoint.split(",")),t.value.LocalDisplayCount&&(m.value=parseInt(t.value.LocalDisplayCount)||0),t.value.SearchPageSize&&(y.value=parseInt(t.value.SearchPageSize)||0))}catch(e){console.error("加载配置失败:",e),b.error("加载配置失败")}finally{E.value=!1}}),Se=()=>{Q.value=!0,ne(()=>{var o,e;(e=(o=q.value)==null?void 0:o.input)==null||e.focus()})},be=()=>{z.value=!0,ne(()=>{var o,e;(e=(o=N.value)==null?void 0:o.input)==null||e.focus()})},J=()=>{if(I.value){const o=I.value.trim();o&&!v.value.includes(o)&&(v.value.push(o),W(v.value))}Q.value=!1,I.value=""},$=()=>{if(T.value){const o=T.value.trim();o&&!f.value.includes(o)&&(f.value.push(o),H(f.value))}z.value=!1,T.value=""},G=(o,e)=>{o==="transferAdMessage"?(v.value.splice(e,1),W(v.value)):(f.value.splice(e,1),H(f.value))},Ve=o=>{t.value.LocalDisplayCount=o.toString()},ye=o=>{t.value.SearchPageSize=o.toString()},ge=()=>{t.value={QuarkCookie:"",QuarkTransferPath:"/转存-分享（派派圈软件）",QuarkTransferSpeed:"3",QuarkShareSpeed:"3",QuarkSharePassword:"8888",BaiduCookie:"",BaiduAdSavePath:"/回收站（派派圈软件）",BaiduTransferPath:"/转存-分享（派派圈软件）",BaiduTransferSpeed:"3",BaiduShareSpeed:"3",BaiduRandomPassword:"开启",BaiduSharePassword:"8888",MediaAuthExpiry:"",TransferAdMessage:"微信|资源|加我|扩容|+v|免费|资源|.txt|资源|获取|群组|ID|防丢失|夸克|频道|公众号|吾爱笔记|笔记|.docx|..mp4|短剧|免费|微信|全网|20T|会员|更多影视内容",SearchKeyword:"搜|搜剧|短剧|影视",EnableLocalSearch:"开启",SearchSuccessLocalReplyPrefix:"-------------",SearchResultLocalTemplate:`【{type}】| {name}
{url} {pwd}}`,SearchSuccessLocalReplySuffix:"-------------",SearchFailureLocalReply:"没有找到相关资源，请换个关键词试试吧~🌹🌹🌹",LocalDisplayCount:"5",ContinueAPISearch:"开启",EnabledCloudTypes:"百度网盘,夸克网盘",EnableAPISearch:"开启",APIEndpoint:"kk大厅,kk短剧",SearchPreMessage:"正在搜索中，请稍等~",SearchSuccessAPIReplyPrefix:`共搜索到数量:{total}
按序号回复即可获得
----------------`,SearchResultAPITemplate:`【{code}】 |【{type}】{name}
{url} {pwd}`,SearchSuccessAPIReplySuffix:`----------------
当前页面{currentPage}/{totalPage}
上一页/下一页/跳页
----------------
获取链接：[序号]
如：发送1，会发送序号为1的资源`,SearchFailureAPIReply:"没有找到相关资源，请换个关键词试试吧~🌹🌹🌹",SearchResultAPIDataTemplate:`{name}
{url} 提取码：{pwd}`,DirectShowLink:"关闭",SearchPageSize:"10",JumpPageCommand:"跳页",SaveToLocalDB:"开启",AutoTransfer:"关闭",AutoTransferNotifyUserSuccess:"",AutoTransferNotifyUserFailed:""}},W=o=>{const e=o.map(n=>n.trim()).filter(n=>n!=="");t.value.TransferAdMessage=e.join("|")},H=o=>{const e=o.map(n=>n.trim()).filter(n=>n!=="");t.value.SearchKeyword=e.join("|")};te(w,o=>{t.value.EnabledCloudTypes=o.join(",")}),te(S,o=>{t.value.APIEndpoint=o.join(",")});const he=()=>k(this,null,function*(){j.value=!0;try{const o={};Object.entries(t.value).forEach(([e,n])=>{O.value[e]==="关闭"&&(o[F[e]]=n)}),yield Be({robot_id:g.value,contact_id:re.value,configs:o}),b.success("保存成功")}catch(o){console.error("保存配置失败:",o),b.error("保存配置失败")}finally{j.value=!1}}),Pe=()=>k(this,null,function*(){var o;try{const e=yield Ue();return(o=e==null?void 0:e.data)!=null&&o.robot_id?(g.value=e.data.robot_id,!0):!1}catch(e){return console.error("获取机器人信息失败:",e),b.error("获取机器人信息失败"),!1}});return Ae(()=>k(this,null,function*(){E.value=!0;try{if(ge(),!(yield Pe())){b.error("未找到可用的机器人");return}yield me(),yield ve(),yield fe("全局配置")}catch(o){console.error("初始化失败:",o),b.error("初始化失败")}finally{E.value=!1}})),(o,e)=>{const n=i("el-icon"),h=i("el-button"),d=i("el-input"),s=i("el-form-item"),P=i("el-form"),C=i("el-collapse-item"),x=i("el-switch"),X=i("el-tag"),Y=i("el-collapse"),Z=i("el-tab-pane"),ee=i("el-input-number"),ae=i("el-option"),le=i("el-select"),ke=i("el-tabs"),_e=i("el-card");return c(),L("div",Me,[a(_e,{class:"config-card"},{header:u(()=>[U("div",Ke,[e[34]||(e[34]=U("span",{class:"header-title"},"全局配置",-1)),a(h,{type:"primary",onClick:he,class:"save-button"},{default:u(()=>[a(n,null,{default:u(()=>[a(B(Ie))]),_:1}),e[33]||(e[33]=D(" 保存配置 "))]),_:1})])]),default:u(()=>[a(ke,{modelValue:_.value,"onUpdate:modelValue":e[32]||(e[32]=l=>_.value=l),class:"config-tabs"},{default:u(()=>[a(Z,{label:"网盘配置",name:"disk"},{default:u(()=>[a(Y,{modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),class:"config-collapse"},{default:u(()=>[a(C,{title:"夸克网盘",name:"quark"},{default:u(()=>[a(P,{model:t.value,"label-width":"180px",class:"config-form"},{default:u(()=>[a(s,{label:"夸克cookie"},{default:u(()=>[a(d,{modelValue:t.value.QuarkCookie,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.QuarkCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"夸克转存路径"},{default:u(()=>[a(d,{modelValue:t.value.QuarkTransferPath,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.QuarkTransferPath=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"夸克分享密码"},{default:u(()=>[a(d,{modelValue:t.value.QuarkSharePassword,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.QuarkSharePassword=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(C,{title:"百度网盘",name:"baidu"},{default:u(()=>[a(P,{model:t.value,"label-width":"180px",class:"config-form"},{default:u(()=>[a(s,{label:"百度cookie"},{default:u(()=>[a(d,{modelValue:t.value.BaiduCookie,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.BaiduCookie=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"百度转存路径"},{default:u(()=>[a(d,{modelValue:t.value.BaiduTransferPath,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.BaiduTransferPath=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"百度分享密码"},{default:u(()=>[U("div",Qe,[a(d,{modelValue:t.value.BaiduSharePassword,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.BaiduSharePassword=l)},null,8,["modelValue"]),a(x,{modelValue:t.value.BaiduRandomPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.BaiduRandomPassword=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":"","active-text":"随机密码","inactive-text":"固定密码",class:"password-switch"},null,8,["modelValue"])])]),_:1}),a(s,{label:"百度广告回收站路径"},{default:u(()=>[a(d,{modelValue:t.value.BaiduAdSavePath,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.BaiduAdSavePath=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(C,{title:"转存配置",name:"transfer"},{default:u(()=>[a(P,{model:t.value,"label-width":"180px",class:"config-form"},{default:u(()=>[a(s,{label:"转存广告词"},{default:u(()=>[U("div",ze,[(c(!0),L(M,null,K(v.value,(l,R)=>(c(),V(X,{key:R,closable:"",onClose:we=>G("transferAdMessage",R),class:"tag-item"},{default:u(()=>[D(oe(l),1)]),_:2},1032,["onClose"]))),128)),Q.value?(c(),V(d,{key:0,ref_key:"transferAdMessageInputRef",ref:q,modelValue:I.value,"onUpdate:modelValue":e[8]||(e[8]=l=>I.value=l),class:"tag-input",size:"small",onKeyup:ue(J,["enter"]),onBlur:J},null,8,["modelValue"])):(c(),V(h,{key:1,class:"add-tag-button",size:"small",onClick:Se},{default:u(()=>[a(n,null,{default:u(()=>[a(B(se))]),_:1}),e[35]||(e[35]=D(" 添加广告词 "))]),_:1}))])]),_:1}),a(s,{label:"搜索词"},{default:u(()=>[U("div",Fe,[(c(!0),L(M,null,K(f.value,(l,R)=>(c(),V(X,{key:R,closable:"",onClose:we=>G("searchKeyword",R),class:"tag-item"},{default:u(()=>[D(oe(l),1)]),_:2},1032,["onClose"]))),128)),z.value?(c(),V(d,{key:0,ref_key:"searchKeywordInputRef",ref:N,modelValue:T.value,"onUpdate:modelValue":e[9]||(e[9]=l=>T.value=l),class:"tag-input",size:"small",onKeyup:ue($,["enter"]),onBlur:$},null,8,["modelValue"])):(c(),V(h,{key:1,class:"add-tag-button",size:"small",onClick:be},{default:u(()=>[a(n,null,{default:u(()=>[a(B(se))]),_:1}),e[36]||(e[36]=D(" 添加搜索词 "))]),_:1}))])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(Z,{label:"搜索配置",name:"search"},{default:u(()=>[a(Y,{modelValue:p.value,"onUpdate:modelValue":e[31]||(e[31]=l=>p.value=l),class:"config-collapse"},{default:u(()=>[a(C,{title:"本地搜索",name:"localSearch"},{default:u(()=>[a(P,{model:t.value,"label-width":"180px",class:"config-form"},{default:u(()=>[a(s,{label:"是否开启本地搜索"},{default:u(()=>[a(x,{modelValue:t.value.EnableLocalSearch,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.EnableLocalSearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功回复前缀"},{default:u(()=>[a(d,{modelValue:t.value.SearchSuccessLocalReplyPrefix,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.SearchSuccessLocalReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索结果模板"},{default:u(()=>[a(d,{modelValue:t.value.SearchResultLocalTemplate,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.SearchResultLocalTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功回复后缀"},{default:u(()=>[a(d,{modelValue:t.value.SearchSuccessLocalReplySuffix,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.SearchSuccessLocalReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索失败回复"},{default:u(()=>[a(d,{modelValue:t.value.SearchFailureLocalReply,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.SearchFailureLocalReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地显示条数"},{default:u(()=>[a(ee,{modelValue:m.value,"onUpdate:modelValue":e[16]||(e[16]=l=>m.value=l),min:0,max:10,onChange:Ve,class:"number-input"},null,8,["modelValue"])]),_:1}),a(s,{label:"本地搜索成功继续API搜索"},{default:u(()=>[a(x,{modelValue:t.value.ContinueAPISearch,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.ContinueAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),a(C,{title:"API接口搜索",name:"apiSearch"},{default:u(()=>[a(P,{model:t.value,"label-width":"180px",class:"config-form"},{default:u(()=>[a(s,{label:"开启接口搜索"},{default:u(()=>[a(x,{modelValue:t.value.EnableAPISearch,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.EnableAPISearch=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索前置消息"},{default:u(()=>[a(d,{modelValue:t.value.SearchPreMessage,"onUpdate:modelValue":e[19]||(e[19]=l=>t.value.SearchPreMessage=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索成功回复前缀"},{default:u(()=>[a(d,{modelValue:t.value.SearchSuccessAPIReplyPrefix,"onUpdate:modelValue":e[20]||(e[20]=l=>t.value.SearchSuccessAPIReplyPrefix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索结果模板"},{default:u(()=>[a(d,{modelValue:t.value.SearchResultAPITemplate,"onUpdate:modelValue":e[21]||(e[21]=l=>t.value.SearchResultAPITemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索成功回复后缀"},{default:u(()=>[a(d,{modelValue:t.value.SearchSuccessAPIReplySuffix,"onUpdate:modelValue":e[22]||(e[22]=l=>t.value.SearchSuccessAPIReplySuffix=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"转存后结果模板"},{default:u(()=>[a(d,{modelValue:t.value.SearchResultAPIDataTemplate,"onUpdate:modelValue":e[23]||(e[23]=l=>t.value.SearchResultAPIDataTemplate=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索失败回复"},{default:u(()=>[a(d,{modelValue:t.value.SearchFailureAPIReply,"onUpdate:modelValue":e[24]||(e[24]=l=>t.value.SearchFailureAPIReply=l),type:"textarea",rows:3,class:"custom-textarea"},null,8,["modelValue"])]),_:1}),a(s,{label:"搜索结果分页大小"},{default:u(()=>[a(ee,{modelValue:y.value,"onUpdate:modelValue":e[25]||(e[25]=l=>y.value=l),min:0,max:10,onChange:ye,class:"number-input"},null,8,["modelValue"])]),_:1}),a(s,{label:"启用网盘类型"},{default:u(()=>[a(le,{modelValue:w.value,"onUpdate:modelValue":e[26]||(e[26]=l=>w.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择网盘类型",class:"full-width-select"},{default:u(()=>[(c(!0),L(M,null,K(B(De),l=>(c(),V(ae,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"启用接口"},{default:u(()=>[a(le,{modelValue:S.value,"onUpdate:modelValue":e[27]||(e[27]=l=>S.value=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"请选择接口",class:"full-width-select"},{default:u(()=>[(c(!0),L(M,null,K(B(Ee),l=>(c(),V(ae,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"跳页"},{default:u(()=>[a(d,{modelValue:t.value.JumpPageCommand,"onUpdate:modelValue":e[28]||(e[28]=l=>t.value.JumpPageCommand=l)},null,8,["modelValue"])]),_:1}),a(s,{label:"分享后保存到本地"},{default:u(()=>[a(x,{modelValue:t.value.SaveToLocalDB,"onUpdate:modelValue":e[29]||(e[29]=l=>t.value.SaveToLocalDB=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1}),a(s,{label:"直接显示链接"},{default:u(()=>[a(x,{modelValue:t.value.DirectShowLink,"onUpdate:modelValue":e[30]||(e[30]=l=>t.value.DirectShowLink=l),"active-value":"开启","inactive-value":"关闭","inline-prompt":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),Je=Te(je,[["__scopeId","data-v-7f07c97d"]]);export{Je as default};
