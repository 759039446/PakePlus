var A=Object.defineProperty;var R=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var V=(a,r,l)=>r in a?A(a,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[r]=l,L=(a,r)=>{for(var l in r||(r={}))I.call(r,l)&&V(a,l,r[l]);if(R)for(var l of R(r))N.call(r,l)&&V(a,l,r[l]);return a};var i=(a,r,l)=>new Promise((T,z)=>{var C=h=>{try{d(l.next(h))}catch(g){z(g)}},S=h=>{try{d(l.throw(h))}catch(g){z(g)}},d=h=>h.done?T(h.value):Promise.resolve(h.value).then(C,S);d((l=l.apply(a,r)).next())});import{az as v,n as u,t as W,aV as $,x as G,b as f,r as x,P,f as M,aw as p,aW as J}from"./index-C-Wg83ov.js";import{u as k}from"./hooks-B9j_WYZE.js";const b="http://localhost:2556",K=a=>v.request("post",b+"/api/panShare/page",{data:a}),Q=a=>v.request("post",b+"/api/panShare/update",{data:a}),X=a=>v.request("post",b+"/api/panShare/delete",{data:a}),Y=a=>v.request("post",b+"/api/panShare/add",{data:a}),Z=a=>v.request("post",b+"/api/panShare/export",{data:a,responseType:"blob"}),ee=a=>{const r=new FormData;return r.append("file",a),v.request("post",b+"/api/panShare/import",{data:r,headers:{"Content-Type":"multipart/form-data"}})},ae=()=>v.request("get",b+"/api/panShare/template",{responseType:"blob"}),te={width:1024,height:1024,body:'<path fill="currentColor" d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"/>'},ne={width:1024,height:1024,body:'<path fill="currentColor" d="m199.04 672.64l193.984 112l224-387.968l-193.92-112l-224 388.032zm-23.872 60.16l32.896 148.288l144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112l56.704-98.112l-193.984-112l-56.64 98.112zM104.32 708.8l384-665.024l304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z"/>'},re={width:1024,height:1024,body:'<path fill="currentColor" d="M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z"/><path fill="currentColor" d="M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0z"/><path fill="currentColor" d="M512 896a384 384 0 1 0 0-768a384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896a448 448 0 0 1 0 896z"/>'};function ue(){const a=u({}),r=u(!0),l=u("no"),T=u("nohide"),z=u("default"),C=u("right"),S=u([]),d=u("编辑"),h=[{label:"名称",width:120,prop:"name",valueType:"copy"},{label:"链接",prop:"url",valueType:"copy"},{label:"提取码",prop:"extractCode",valueType:"copy"},{label:"网盘类型",prop:"panType",valueType:"select",options:[{label:"夸克网盘",value:"夸克网盘"},{label:"百度网盘",value:"百度网盘"},{label:"迅雷网盘",value:"迅雷网盘"},{label:"UC网盘",value:"UC网盘"},{label:"其他",value:"其他"}]}],g=u(!1),w=u({}),U=[{label:"名称",prop:"name"},{label:"链接",prop:"url",cellRenderer:({row:e})=>f(P,null,[f(x("el-link"),{type:"primary",href:e.url,target:"_blank"},{default:()=>[e.url]})])},{label:"提取码",prop:"extractCode"},{label:"网盘类型",cellRenderer:({row:e})=>f(P,null,[f(x("el-tag"),{type:"primary"},{default:()=>[e.panType]})])},{align:"center",label:"操作",cellRenderer:({row:e})=>f(P,null,[f(x("el-button"),{link:!0,icon:k(ne),type:"primary",onClick:()=>B(e)},{default:()=>[M("编辑")]}),f(x("el-button"),{link:!0,icon:k(te),type:"danger",onClick:()=>F(e)},{default:()=>[M("删除")]})])}],t=W({pageSize:10,currentPage:1,pageSizes:[10,15,20],total:0,align:"right",background:!0,size:"default"}),D=()=>i(this,null,function*(){t.currentPage=1,yield y(t.currentPage,t.pageSize)}),E=()=>i(this,null,function*(){a.value={},t.currentPage=1,yield y(t.currentPage,t.pageSize)});function q(){return i(this,null,function*(){d.value="添加",w.value={name:"",url:"",extractCode:"",panType:""},g.value=!0})}function y(e,s){return i(this,null,function*(){var o,n;r.value=!0;try{const m=L({page:e,pageSize:s},a.value),c=yield K(m);c.code===200?(S.value=c.data,t.total=c.total):p.error(c.message||"获取数据失败")}catch(m){p.error(((n=(o=m.response)==null?void 0:o.data)==null?void 0:n.message)||"获取数据失败")}finally{r.value=!1}})}function B(e){return i(this,null,function*(){d.value="编辑",g.value=!0,w.value={id:e.id,name:e.name,url:e.url,extractCode:e.extractCode,panType:e.panType}})}function F(e){return i(this,null,function*(){J.confirm("删除后不可恢复，是否确定删除?","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){var s,o;try{const n=yield X(e);n.code===200?(p({type:"success",message:n.message||"删除成功"}),yield y(t.currentPage,t.pageSize)):p({type:"error",message:n.message||"删除失败"})}catch(n){p({type:"error",message:((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"删除失败"})}}))})}function H(e){t.size=e}function O(e){}function _(){return i(this,null,function*(){yield y(t.currentPage,t.pageSize)})}function j(){return i(this,null,function*(){var s,o;const e=u();try{if(d.value==="添加")e.value=yield Y(w.value);else if(d.value==="编辑")e.value=yield Q(w.value);else{p({type:"error",message:"弹窗配置错误"});return}e.value.code===200?(p({type:"success",message:e.value.message}),g.value=!1,yield y(t.currentPage,t.pageSize)):p({type:"error",message:e.value.message})}catch(n){p({type:"error",message:((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"操作失败"})}})}return $(()=>{t.align=C.value}),G(()=>i(this,null,function*(){yield y(t.currentPage,t.pageSize)})),{loading:r,columns:U,pageData:S,select:l,hideVal:T,tableSize:z,searchConditon:a,pagination:t,paginationAlign:C,editVisible:g,editValues:w,editColumns:h,editTitle:d,AddFill:re,onChange:H,onSizeChange:O,onCurrentChange:_,handleSearch:D,handleOpenAddDialog:q,handleRest:E,handleConfirm:j,useRenderIcon:k,handleExport:()=>i(this,null,function*(){var e,s;try{const o=yield Z({name:a.value.name,panType:a.value.panType}),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m=window.URL.createObjectURL(n),c=document.createElement("a");c.href=m,c.download="pan_share_export.xlsx",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(m),p.success("导出成功")}catch(o){p.error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"导出失败")}}),handleImport:e=>i(this,null,function*(){var s,o;try{const n=yield ee(e);n.code===200?(p.success(n.message||"导入成功"),y(t.currentPage,t.pageSize)):p.error(n.message||"导入失败")}catch(n){p.error(((o=(s=n.response)==null?void 0:s.data)==null?void 0:o.message)||"导入失败")}}),handleDownloadTemplate:()=>i(this,null,function*(){var e,s;try{const o=yield ae(),n=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m=window.URL.createObjectURL(n),c=document.createElement("a");c.href=m,c.download="pan_share_template.xlsx",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(m)}catch(o){p.error(((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"下载模板失败")}})}}export{ue as useColumns};
