var de=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var le=(e,t,a)=>t in e?de(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,J=(e,t)=>{for(var a in t||(t={}))ce.call(t,a)&&le(e,a,t[a]);if(ee)for(var a of ee(t))fe.call(t,a)&&le(e,a,t[a]);return e};var ne=(e,t,a)=>new Promise((R,c)=>{var g=s=>{try{d(a.next(s))}catch(m){c(m)}},h=s=>{try{d(a.throw(s))}catch(m){c(m)}},d=s=>s.done?R(s.value):Promise.resolve(s.value).then(g,h);d((a=a.apply(e,t)).next())});import{useColumns as he}from"./columns-C_e-J90i.js";import{o as _,c as A,e as $,d as ae,n as x,a6 as y,C as ve,ak as ge,aw as O,q as Z,b as l,ar as me,P as te,w as D,j as P,r as i,f as M,u as r,$ as pe,v as be,ax as Ce,J as xe,W as we,a2 as ye,z as ke,al as _e,a8 as Q,h as X}from"./index-6_7yIFiW.js";import{u as Ae}from"./epTheme-CSrvJKcx.js";import"./hooks-BGCaOdhW.js";const Re={width:"32",height:"32",fill:"currentColor","aria-hidden":"true","data-icon":"holder",viewBox:"64 64 896 896"};function Ee(e,t){return _(),A("svg",Re,t[0]||(t[0]=[$("path",{d:"M300 276.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97m0 284a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 228a56 56 0 1 0 112 0 56 56 0 0 0-112 0m0 284a56 56 0 1 0 112 0 56 56 0 0 0-112 0M300 844.5a56 56 0 1 0 56-97 56 56 0 0 0-56 97M640 796a56 56 0 1 0 112 0 56 56 0 0 0-112 0"},null,-1)]))}const Ve={render:Ee},Be={width:"32",height:"32",viewBox:"0 0 24 24"};function Se(e,t){return _(),A("svg",Be,t[0]||(t[0]=[$("path",{fill:"currentColor",d:"M22 4V2H2v2h9v14.17l-5.5-5.5-1.42 1.41L12 22l7.92-7.92-1.42-1.41-5.5 5.5V4z"},null,-1)]))}const De={render:Se},Pe={width:"32",height:"32",viewBox:"0 0 24 24"};function Me(e,t){return _(),A("svg",Pe,t[0]||(t[0]=[$("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4m-4 4a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"},null,-1)]))}const $e={render:Me},ze={width:"32",height:"32",viewBox:"0 0 24 24"};function Te(e,t){return _(),A("svg",ze,t[0]||(t[0]=[$("path",{fill:"currentColor",d:"M3.34 17a10 10 0 0 1-.978-2.326 3 3 0 0 0 .002-5.347A10 10 0 0 1 4.865 4.99a3 3 0 0 0 4.631-2.674 10 10 0 0 1 5.007.002 3 3 0 0 0 4.632 2.672A10 10 0 0 1 20.66 7c.433.749.757 1.53.978 2.326a3 3 0 0 0-.002 5.347 10 10 0 0 1-2.501 4.337 3 3 0 0 0-4.631 2.674 10 10 0 0 1-5.007-.002 3 3 0 0 0-4.632-2.672A10 10 0 0 1 3.34 17m5.66.196a5 5 0 0 1 2.25 2.77q.75.071 1.499.001A5 5 0 0 1 15 17.197a5 5 0 0 1 3.525-.565q.435-.614.748-1.298A5 5 0 0 1 18 12c0-1.26.47-2.437 1.273-3.334a8 8 0 0 0-.75-1.298A5 5 0 0 1 15 6.804a5 5 0 0 1-2.25-2.77q-.75-.071-1.499-.001A5 5 0 0 1 9 6.803a5 5 0 0 1-3.525.565 8 8 0 0 0-.748 1.298A5 5 0 0 1 6 12a5 5 0 0 1-1.273 3.334 8 8 0 0 0 .75 1.298A5 5 0 0 1 9 17.196M12 15a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2"},null,-1)]))}const je={render:Te},Fe={width:"32",height:"32",viewBox:"0 0 24 24"};function Oe(e,t){return _(),A("svg",Fe,t[0]||(t[0]=[$("path",{fill:"currentColor",d:"M13.79 10.21a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42l-2.5-2.5a1 1 0 0 0-.33-.21 1 1 0 0 0-.76 0 1 1 0 0 0-.33.21l-2.5 2.5a1 1 0 0 0 1.42 1.42l.79-.8v5.18l-.79-.8a1 1 0 0 0-1.42 1.42l2.5 2.5a1 1 0 0 0 .33.21.94.94 0 0 0 .76 0 1 1 0 0 0 .33-.21l2.5-2.5a1 1 0 0 0-1.42-1.42l-.79.8V9.41ZM7 4h10a1 1 0 0 0 0-2H7a1 1 0 0 0 0 2m10 16H7a1 1 0 0 0 0 2h10a1 1 0 0 0 0-2"},null,-1)]))}const Ne={render:Oe};function Ie(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ce(e)}const qe={title:{type:String,default:"列表"},tableRef:{type:Object},columns:{type:Array,default:()=>[]},isExpandAll:{type:Boolean,default:!0},tableKey:{type:[String,Number],default:"0"}},He=ae({name:"PureTableBar",props:qe,emits:["refresh","fullscreen"],setup(e,{emit:t,slots:a,attrs:R}){const c=x("default"),g=x(!1),h=x(!0),d=x(!1),s=x(!1),m=ke(),w=x(e.isExpandAll),z=y(e==null?void 0:e.columns).filter(n=>ve(n==null?void 0:n.hide)?!n.hide:!(ge(n==null?void 0:n.hide)&&(n!=null&&n.hide())));let p=O(y(e==null?void 0:e.columns),"label");const k=x(O(y(z),"label")),f=x(y(e==null?void 0:e.columns)),E=Z(()=>n=>({background:n===c.value?Ae().epThemeColor:"",color:n===c.value?"#fff":"var(--el-text-color-primary)"})),b=Z(()=>["text-black","dark:text-white","duration-100","hover:!text-primary","cursor-pointer","outline-none"]),N=Z(()=>["flex","justify-between","pt-[3px]","px-[11px]","border-b-[1px]","border-solid","border-[#dcdfe6]","dark:border-[#303030]"]);function Y(){g.value=!0,t("refresh"),xe(500).then(()=>g.value=!1)}function v(){w.value=!w.value,T(e.tableRef.data,w.value)}function I(){d.value=!d.value,t("fullscreen",d.value)}function T(n,u){n.forEach(o=>{e.tableRef.toggleRowExpansion(o,u),o.children!==void 0&&o.children!==null&&T(o.children,u)})}function q(n){k.value=n?p:[],s.value=!1,f.value.map(u=>n?u.hide=!1:u.hide=!0)}function H(n){k.value=n;const u=n.length;h.value=u===p.length,s.value=u>0&&u<p.length}function V(n,u){f.value.filter(o=>o.label===u)[0].hide=!n}function U(){return ne(this,null,function*(){h.value=!0,s.value=!1,f.value=y(e==null?void 0:e.columns),p=[],p=yield O(y(e==null?void 0:e.columns),"label"),k.value=O(y(z),"label")})}const B={dropdown:()=>l(i("el-dropdown-menu"),{class:"translation"},{default:()=>[l(i("el-dropdown-item"),{style:E.value("large"),onClick:()=>c.value="large"},{default:()=>[M("宽松")]}),l(i("el-dropdown-item"),{style:E.value("default"),onClick:()=>c.value="default"},{default:()=>[M("默认")]}),l(i("el-dropdown-item"),{style:E.value("small"),onClick:()=>c.value="small"},{default:()=>[M("紧凑")]})]})},oe=n=>{n.preventDefault(),we(()=>{var o;const u=((o=m==null?void 0:m.proxy)==null?void 0:o.$refs[`GroupRef${r(e.tableKey)}`]).$el.firstElementChild;ye.create(u,{animation:300,handle:".drag-btn",onEnd:({newIndex:S,oldIndex:C,item:ue})=>{const K=ue,L=K.parentNode,G=f.value[C],W=f.value[S];if(G!=null&&G.fixed||W!=null&&W.fixed){const F=L.children[C];S>C?L.insertBefore(K,F):L.insertBefore(K,F&&F.nextElementSibling);return}const se=f.value.splice(C,1)[0];f.value.splice(S,0,se)}})})},re=n=>!!f.value.filter(u=>u.label===n)[0].fixed,j=n=>({content:n,offset:[0,18],duration:[300,0],followCursor:!0,hideOnClick:"toggle"}),ie={reference:()=>D(l(je,{class:["w-[16px]",b.value]},null),[[P("tippy"),j("列设置")]])};return()=>{var u;let n;return l(te,null,[l("div",me(R,{class:["w-[99/100]","px-2","pb-2","bg-bg_color",d.value?["!w-full","!h-full","z-[2002]","fixed","inset-0"]:"mt-2"]}),[l("div",{class:"flex justify-between w-full h-[60px] p-4"},[a!=null&&a.title?a.title():l("p",{class:"font-bold truncate"},[e.title]),l("div",{class:"flex items-center justify-around"},[a!=null&&a.buttons?l("div",{class:"flex mr-4"},[a.buttons()]):null,(u=e.tableRef)!=null&&u.size?l(te,null,[D(l(De,{class:["w-[16px]",b.value],style:{transform:w.value?"none":"rotate(-90deg)"},onClick:()=>v()},null),[[P("tippy"),j(w.value?"折叠":"展开")]]),l(i("el-divider"),{direction:"vertical"},null)]):null,D(l($e,{class:["w-[16px]",b.value,g.value?"animate-spin":""],onClick:()=>Y()},null),[[P("tippy"),j("刷新")]]),l(i("el-divider"),{direction:"vertical"},null),D(l(i("el-dropdown"),{trigger:"click"},J({default:()=>[l(Ne,{class:["w-[16px]",b.value]},null)]},B)),[[P("tippy"),j("密度")]]),l(i("el-divider"),{direction:"vertical"},null),l(i("el-popover"),{placement:"bottom-start","popper-style":{padding:0},width:"200",trigger:"click"},J({default:()=>[l("div",{class:[N.value]},[l(i("el-checkbox"),{class:"!-mr-1",label:"列展示",modelValue:h.value,"onUpdate:modelValue":o=>h.value=o,indeterminate:s.value,onChange:o=>q(o)},null),l(i("el-button"),{type:"primary",link:!0,onClick:()=>U()},{default:()=>[M("重置")]})]),l("div",{class:"pt-[6px] pl-[11px]"},[l(i("el-scrollbar"),{"max-height":"36vh"},{default:()=>[l(i("el-checkbox-group"),{ref:`GroupRef${r(e.tableKey)}`,modelValue:k.value,onChange:o=>H(o)},{default:()=>[l(i("el-space"),{direction:"vertical",alignment:"flex-start",size:0},Ie(n=p.map((o,S)=>l("div",{class:"flex items-center"},[l(Ve,{class:["drag-btn w-[16px] mr-2",re(o)?"!cursor-no-drop":"!cursor-grab"],onMouseenter:C=>oe(C)},null),l(i("el-checkbox"),{key:S,label:o,value:o,onChange:C=>V(C,o)},{default:()=>[l("span",{title:o,class:"inline-block w-[120px] truncate hover:text-text_color_primary"},[o])]})])))?n:{default:()=>[n]})]})]})])]},ie)),l(i("el-divider"),{direction:"vertical"},null),D(l(i("iconifyIconOffline"),{class:["w-[16px]",b.value],icon:d.value?pe:be,onClick:()=>I()},null),[[P("tippy"),d.value?"退出全屏":"全屏"]])])]),a.default({size:c.value,dynamicColumns:f.value})])])}}}),Ue=_e(He),Ze=ae({__name:"index",setup(e){const{loading:t,columns:a,pageData:R,pagination:c,editVisible:g,editValues:h,editColumns:d,editTitle:s,AddFill:m,onSizeChange:w,onCurrentChange:z,handleSearch:p,handleOpenAddDialog:k,handleConfirm:f,useRenderIcon:E,searchConditon:b,handleRest:N}=he();return(Y,v)=>{const I=i("PlusSearch"),T=i("el-button"),q=i("PlusDialogForm"),H=i("pure-table");return _(),A("div",null,[l(I,{modelValue:r(b),"onUpdate:modelValue":v[0]||(v[0]=V=>Q(b)?b.value=V:null),class:"bg-white p-[18px] rounded-[4px]",columns:r(d),"show-number":2,"label-width":"80","label-position":"right",onSearch:r(p),onReset:r(N)},null,8,["modelValue","columns","onSearch","onReset"]),l(r(Ue),{ref:"tableRef",title:"资源管理",columns:r(a),isExpandAll:!1,onRefresh:r(p)},{buttons:X(()=>[l(T,{type:"primary",icon:r(E)(r(m)),onClick:r(k)},{default:X(()=>v[3]||(v[3]=[M(" 新增资源 ")])),_:1},8,["icon","onClick"])]),default:X(({size:V,dynamicColumns:U})=>[l(q,{visible:r(g),"onUpdate:visible":v[1]||(v[1]=B=>Q(g)?g.value=B:null),modelValue:r(h),"onUpdate:modelValue":v[2]||(v[2]=B=>Q(h)?h.value=B:null),form:{columns:r(d),rowProps:{gutter:20},colProps:{span:12}},dialog:{title:r(s)},onConfirm:r(f)},null,8,["visible","modelValue","form","dialog","onConfirm"]),l(H,{border:"","row-key":"id",alignWhole:"center",adaptive:"",loading:r(t),showOverflowTooltip:"",data:r(R),size:V,columns:U,pagination:r(c),onPageSizeChange:r(w),onPageCurrentChange:r(z)},null,8,["loading","data","size","columns","pagination","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["columns","onRefresh"])])}}});export{Ze as default};
