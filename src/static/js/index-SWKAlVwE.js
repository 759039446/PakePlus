var u=(m,f,a)=>new Promise((s,_)=>{var n=t=>{try{o(a.next(t))}catch(i){_(i)}},p=t=>{try{o(a.throw(t))}catch(i){_(i)}},o=t=>t.done?s(t.value):Promise.resolve(t.value).then(n,p);o((a=a.apply(m,f)).next())});import{d as L,n as h,I as w,g as R,h as c,r as d,o as E,e as I,b as r,f as g,c as x,u as O,aK as S,aD as U,_ as P}from"./index-D7xcRWf2.js";const q={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_API_URL:"http://localhost:2556",VITE_CDN:"false",VITE_COMPRESSION:"none",VITE_HIDE_HOME:"false",VITE_PORT:"8848",VITE_PUBLIC_PATH:"/",VITE_ROUTER_HISTORY:"hash"},A={class:"qrcode-container"},D={class:"remark-input"},N={key:1,class:"loading"},H={class:"action-buttons"},M=L({__name:"index",props:{visible:{type:Boolean},type:{},onRefresh:{type:Function}},emits:["update:visible"],setup(m,{emit:f}){const{VITE_BASE_API_URL:a}=q,s=m,_=f,n=h(""),p=h(""),o=h("");w(()=>s.visible,l=>u(this,null,function*(){l?(p.value=s.type==="quark"?"夸克网盘登录":"百度网盘登录",yield t()):(n.value="",o.value="")}));const t=()=>u(this,null,function*(){try{const l=s.type==="quark"?`${a}/api/task/quarkLogin`:`${a}/api/task/baiduLogin`,e=yield U.request("post",l,{data:{remark:o.value}});e.code===200&&e.data&&(n.value=e.data)}catch(l){console.error("获取二维码失败:",l)}}),i=()=>u(this,null,function*(){n.value="",yield t()}),v=()=>{_("update:visible",!1),s.onRefresh&&s.onRefresh()},V=()=>{v()};return(l,e)=>{const k=d("el-button"),y=d("el-input"),C=d("el-image"),T=d("el-icon"),b=d("el-dialog");return E(),R(b,{"model-value":l.visible,"onUpdate:modelValue":v,title:p.value,width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0,onClose:v},{default:c(()=>[I("div",A,[I("div",D,[r(y,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=B=>o.value=B),placeholder:"请输入备注信息",clearable:""},{append:c(()=>[r(k,{onClick:i},{default:c(()=>e[1]||(e[1]=[g(" 重新生成 ")])),_:1})]),_:1},8,["modelValue"])]),n.value?(E(),R(C,{key:0,src:n.value,fit:"contain",style:{width:"300px",height:"300px"}},null,8,["src"])):(E(),x("div",N,[r(T,{class:"is-loading"},{default:c(()=>[r(O(S))]),_:1}),e[2]||(e[2]=g(" 加载中... "))])),I("div",H,[r(k,{type:"primary",onClick:V},{default:c(()=>e[3]||(e[3]=[g(" 我已登录 ")])),_:1})])])]),_:1},8,["model-value","title"])}}}),F=P(M,[["__scopeId","data-v-171bedd6"]]);export{F as L};
